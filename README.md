## **Описание проекта**

Я реализовывал Streaming service (онлайн кинотеатр), который является REST API сервисом, написанным на Go использованием Fiber. На данном этапе проекта in-memory репозиторий заменен на postgres, а так же добавлена сущность owner и взаимодействие между сущностями. 


Выполненные цели:

- Освоить работу с PostgreSQL в Go.
- Научиться создавать и управлять таблицами.
- Реализовать связь между сущностями в базе данных.


## **Этапы выполнения проекта**

Буду рассказывать, о сервисе в той последовательности, в какой я сам его писал.

### 1. Создание миграций
В проекте решил использовать миграции, а не создавать таблицы в бд руками. Использовал пакет golang-migrate, который создал нужную папку и файлы, затем написал нужный код по созданию и удалению таблиц, а также привязал таблице owners индекс

### 2. Изменение слоя Repository
На этом слое была проделана самая большая работа, так как нужно было делать все практически с нуля и для двух сущностей. Я разделил файл repo на repo, owner_repo и service_repo. В repo я оставл структуру репозитория и чуть чуть изменил функцию NewRepository, добавив туда применение миграций. В movie_- и owner_repo я создал индивидуальные интерфейсы и все необходимые функции, которые пишутся достаточно шаблонно. 

### 3. Изменение слоя Service
Работа на слое Service очень похожа на то, что я делал на Repository. Из одного файла service я выделил три: service, movie_service и owner_service. В service лежит структура service, общий интерфейс и функция создания сервиса. В movie_- и owner_service уже индивидуальные интерфейсы и реализация функций, которые тоже шаблонные: распарсить запрос, вызвать нужную функцию со слоя repository, получить ответ, сформировать и  вернуть его с нужным статус кодом.

### 4. Изменение слоя Handlers
Тут все еще проще, я просто добавил ручки для взаимодействия с owner. Для movie ничего менять не надо было.

### 5. Остальные изменения
- Естественно на слоях repo и service нужно было поредачить файлики entities, так как была доавлена новая сущность. 
- Добавил в .env конфигурацию Postgres
- В main функции нужно было сделать небольшие изменения, так как из-за введения owner пришлось поменять структуры на слоях repo и service и, как следствие, функции создания (NewRepository, NewService и тд) 

