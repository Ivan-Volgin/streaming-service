## **Описание проекта**

Я реализовывал Streaming service (онлайн кинотеатр), который является REST API сервисом, написанным на Go использованием Fiber. На данном этапе проекта, проект использует in-memory репозиторий.

Выполненные цели:

-  Закрепление навыка разработки API с использованием Fiber
- Освоение работы с CRUD-операциями и обработкой ошибок
- Настройка конфигурации, через .env и envconfig
- Подготовка структуры для дальнейшего расширения сервиса
- Освоение работы с in-memory памятью

## **Этапы выполнения проекта**

Буду рассказывать, о сервисе в той последовательности, в какой я сам его писал.

### 1. Создание структуры
Структура проекта была взята из шаблона simple service. Она по сути ложится на любой проект, потому что представляет собой классическую чистую архитектуру.

### 2. Создание config и logger
Здесь я тоже смотрел в simple service и повторял за правильной реализацией. В config мы пишем структуры содержащие настройки той или иной области сервиса. Логгер добавил кастомный, взятый из simple service, реализованный с использованием zap.

### 3. Реализация слоя repository
С этого этапа пошла моя личная реализация. Так как задача стояла реализовать in-memory память, в качестве хранилища я использовал мапу с ключом uuid и значением Movie (моя абстракция фильма). В итоге написал структуру репозитория с RWMutex, интерфейс с методами, конструктор и реализацию самих методом. В методах все было шаблонно: сделать нужные проверки и реализовать взаимодействие с хранилищем, не забывая попутно использовать правильные мьютексы, чтобы сервис работал быстро и без датарейсов, и обрабатывать ошибки.

### 4. Реализация слоя service
На этом слое сложностей тоже особых не было, потому что все функции строились по одному и тому же шаблону. Мы получаем запрос, далее его нужно распарсить в структуру, вызвать функцию со слоя репозитория и сформировать ответ. Не забываем делать нужные проверки, обрабатывать ошибки и возвращать правильные статус коды.

### 5. Реализация слоя handlers
Здесь мы создаем ручки для всех наших функций. Как уже было сказано, мы используем Fiber. С помощью него легко настраиваем middleware для ручек, формируем апи-группу v1 и далее прописываем сами ручки с указанием нужных методов.

### 6. Функция main и .env
В функции main все просто, мы подгружаем env файл, заполняем структуру конфига, создаем логгер, репозиторий, new service и апи. Далее в отдельной горутине запускаем сервер. В конце не забываем про graceful shutdown. В .env файле в основном лежит конфигурация для сервера, там была бы и конфигурация для бд, но это уже в следующем практическом задании